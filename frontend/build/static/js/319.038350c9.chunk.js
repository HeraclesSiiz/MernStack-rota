"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[319],{7319:function(e,t,n){n.r(t);var r=n(7762),a=n(4942),o=n(1413),s=n(5671),i=n(3144),l=n(136),u=n(8505),c=n(2791),d=n(5795),h=n(6367),f=n(4373),v=n(6511),m=n(8687),p=n(3513),y=n(184),x=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;(0,s.Z)(this,n),(r=t.call(this,e)).setDate=function(e,t){r.setState((0,o.Z)((0,o.Z)({},r.state),{},(0,a.Z)({},e,t.target.value)))},r.onChangeNurse=function(e){r.setState((0,o.Z)((0,o.Z)({},r.state),{},{selNurse:e.target.value}))};var i=new Date,l=i.getFullYear(),u=i.getMonth()+1>9?i.getMonth()+1:"0"+(i.getMonth()+1),c=new Date(l,u,0).getDate();return r.state={type:0,from:l+"-"+u+"-01",to:l+"-"+u+"-"+c,selNurse:0},r}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.basic,n=this.state,a=n.from,o=n.to,s=n.selNurse,i=[],l=[];i.push({name:"Date",center:!0,wrap:!0,sortable:!0,selector:function(e){return e.date}},{name:"Patient",center:!0,wrap:!0,width:"20vw%",sortable:!0,selector:function(e){return e.patient}},{name:"Duty Start",center:!0,wrap:!0,width:"20vw",sortable:!0,selector:function(e){return e.duty_start}},{name:"Duty End",center:!0,wrap:!0,width:"20vw",sortable:!0,selector:function(e){return e.duty_end}},{name:"Hour",center:!0,wrap:!0,sortable:!0,selector:function(e){return e.hour}});for(var u=[],c=new Date(a);c<=new Date(o);c.setDate(c.getDate()+1)){var m=c.getFullYear()+"-"+(c.getMonth()+1>9?c.getMonth()+1:"0"+(c.getMonth()+1))+"-"+(c.getDate()>9?c.getDate():"0"+c.getDate());u.push(m)}var x=[];t.patients.map((function(e){x[e._id]=e.name}));var D=[],b=0;if(t.nurses.map((function(e){if(e._id==s){var t,n=e.leave?e.leave:[],i=(0,r.Z)(n);try{for(i.s();!(t=i.n()).done;)for(var u=t.value,c=new Date(u.from),d=new Date(u.to),h=c;h<=d;){var f=h.toISOString().slice(0,10);f>=a&&f<=o&&D.push(f),h.setDate(h.getDate()+1)}}catch(v){i.e(v)}finally{i.f()}e.rota.map((function(e){if(e.date>=a&&e.date<=o){b+=e.hour;var t={date:e.date,patient:x[e.patient_id],duty_start:e.duty_start,duty_end:e.duty_end,hour:e.hour};l.push(t)}}))}})),0!=s){var g={date:"Total",hour:b};l.push(g)}return(0,y.jsxs)(h.L5,{children:[(0,y.jsx)("div",{className:"pt-5 text-center text-dark",children:(0,y.jsx)("h1",{className:"mt-3",children:"DAILY TIME RECORD (DTR)"})}),(0,y.jsx)("div",{className:"row",children:(0,y.jsxs)("div",{className:"col",children:[(0,y.jsxs)("div",{className:"row lex align-items-center justify-content-center",children:[(0,y.jsx)("div",{className:"col-md-3",children:(0,y.jsx)(d.Z.Group,{children:(0,y.jsxs)(d.Z.Select,{"aria-label":"patient select",value:s,onChange:function(t){return e.onChangeNurse(t)},children:[(0,y.jsx)("option",{value:"0",children:"Select Nurse"}),t.nurses.map((function(e,t){return(0,y.jsx)("option",{value:e._id,children:e.name},t)}))]})})}),(0,y.jsx)("div",{className:"col-md-3",children:(0,y.jsx)(d.Z.Group,{children:(0,y.jsx)(d.Z.Control,{type:"date",value:a,max:o,onChange:function(t){return e.setDate("from",t)}})})}),(0,y.jsx)("div",{className:"col-md-3",children:(0,y.jsx)(d.Z.Group,{children:(0,y.jsx)(d.Z.Control,{type:"date",value:o,min:a,onChange:function(t){return e.setDate("to",t)}})})}),(0,y.jsx)("div",{className:"col-md-3",children:(0,y.jsxs)(v.CSVLink,{headers:[{label:"Date",key:"date"},{label:"Patient",key:"patient"},{label:"Duty Start",key:"duty_start"},{label:"Duty End",key:"duty_end"},{label:"Hour",key:"hour"}],data:l,filename:"dtr.csv",className:"btn btn-success ",target:"_blank",children:[(0,y.jsx)(f.Cb8,{}),"Export"]})})]}),(0,y.jsx)("div",{className:"p-2",children:(0,y.jsx)(p.ZP,{columns:i,data:l,striped:!0,fixedHeader:!0,fixedHeaderScrollHeight:"60vh"})})]})})]})}}]),n}(c.Component);t.default=(0,m.$j)((function(e){return{basic:e.BasicData}}),null)(x)},7762:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(181);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw s}}}}}}]);
//# sourceMappingURL=319.038350c9.chunk.js.map