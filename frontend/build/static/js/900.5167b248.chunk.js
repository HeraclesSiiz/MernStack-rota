"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[900],{8900:function(e,a,i){i.r(a);var r=i(2982),o=i(7762),t=i(1413),s=i(5671),l=i(3144),n=i(136),d=i(8505),c=i(2791),h=(i(4278),i(8687)),u=i(6367),v=i(8970),m=(i(8983),i(3076)),g=i(184),p=function(e){(0,n.Z)(i,e);var a=(0,d.Z)(i);function i(e){var r;(0,s.Z)(this,i),(r=a.call(this,e)).onChangeYear=function(e){r.setState((0,t.Z)((0,t.Z)({},r.state),{},{selYear:e.target.value}))},r.onChangeMonth=function(e){r.setState((0,t.Z)((0,t.Z)({},r.state),{},{selMonth:e.target.value}))};var o=new Date,l=o.getFullYear(),n=o.getMonth()+1>9?o.getMonth()+1:"0"+(o.getMonth()+1);return r.state={selYear:l,selMonth:n},r}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"swap",value:function(e){var a=[];for(var i in e)a[e[i]]=i;return a}},{key:"render",value:function(){var e=this,a=this.state,i=a.selYear,t=a.selMonth,s=this.props.basic,l=[{members:0,available:0,assigned:0,overtime:0,utilization:0},{members:0,available:0,assigned:0,overtime:0,utilization:0},{members:0,available:0,assigned:0,overtime:0,utilization:0}],n=s.monthNames,d=this.swap(n),c=Object.keys(n),h=Object.values(n),p=c.map((function(e,a){return(0,g.jsx)("option",{value:h[a],children:e})})),b=new Date(i,t,0).getDate(),x=i+"-"+t+"-01",f=i+"-"+t+"-"+b,j=s.holidays,C=[],w=[];j.map((function(e){var a=d[e.slice(0,2)];void 0==w[a]&&(w[a]=[]),w[a].push(i+"-"+e),parseInt(e.slice(0,2))==t&&C.push(i+"-"+e)}));var F=[],k=new Date(i+"-"+t+"-01").getDay();0==k&&(k=7);for(var Z=k;Z<b;Z+=7){var B=Z>9?Z:"0"+Z;F.push(i+"-"+t+"-"+B)}var y=[];for(var D in d)for(var M=new Date(i,D,0).getDate(),_=new Date(i+"-"+D+"-01").getDay(),K=_=0==_?1:7-_+1;K<M;K+=7){var R=K>9?K:"0"+K,T=d[D];void 0==y[T]&&(y[T]=[]),y[T].push(i+"-"+D+"-"+R)}var Y=[],z=[],A=[],N=[],H=[];N[0]=[],N[1]=[],N[2]=[],H[0]=[],H[1]=[],H[2]=[],s.nurses.map((function(e){var a=e.basic_allowances+e.housing_allowances+e.other_allowances,s=e.level;l[s].members++,l[2].members++;var c=e.rota,h=[],u=[];c.map((function(a){if(a.date>=x&&a.date<=f&&(l[s].assigned+=1*a.hour,l[2].assigned+=1*a.hour),a.date.startsWith(i)){var r=parseInt(a.date.slice(5,7)),o=d[[a.date.slice(5,7)]],n=parseInt(a.date.slice(8,10));void 0==h[o]?h[o]=a.hour:h[o]+=a.hour,void 0==N[s][r]?N[s][r]=a.hour:N[s][r]+=a.hour,void 0==N[2][r]?N[2][r]=a.hour:N[2][r]+=a.hour,a.date.startsWith(i+"-"+t)&&(void 0==H[s][n]?H[s][n]=a.hour:H[s][n]+=a.hour,void 0==H[2][n]?H[2][n]=a.hour:H[2][n]+=a.hour),w[o].includes(a.date)&&(void 0==u[o]?u[o]=a.hour:u[o]+=a.hour),a.date.slice(5,7)==t&&(void 0==z[a.patient_id]&&(z[a.patient_id]=[]),void 0==z[a.patient_id][e._id]?z[a.patient_id][e._id]=a.hour:z[a.patient_id][e._id]+=a.hour)}}));var v,m=e.leave,g=[],p=(0,o.Z)(m);try{for(p.s();!(v=p.n()).done;)for(var j=v.value,k=new Date(j.from),Z=new Date(j.to),B=k;B<=Z;){var D=B.getFullYear(),M=B.getMonth()+1>9?B.getMonth()+1:"0"+(B.getMonth()+1),_=B.getDate()>9?B.getDate():"0"+B.getDate();if(D==i&&M==t&&g.push(D+"-"+M+"-"+_),D==i){var K=d[M];void 0==g[K]&&(g[K]=[]),g[K].push(D+"-"+M+"-"+_)}B.setDate(B.getDate()+1)}}catch($){p.e($)}finally{p.f()}var R=[].concat(g,C,F);R=(0,r.Z)(new Set(R)),l[s].available+=8*(b-R.length),l[2].available+=8*(b-R.length);var T=[],I=[];for(var P in n){var W=new Date(i,n[P],0).getDate();if(void 0==g[P]&&(g[P]=[]),void 0==w[P]&&(w[P]=[]),void 0==y[P]&&(y[P]=[]),T[P]=[].concat((0,r.Z)(g[P]),(0,r.Z)(w[P]),(0,r.Z)(y[P])),T[P]=(0,r.Z)(new Set(T[P])),I[P]=8*(W-T[P].length),void 0==h[P]&&(h[P]=0),void 0==u[P]&&(u[P]=0),void 0==Y[P]&&(Y[P]=0),h[P]){var O=parseFloat(15*e.basic_allowances/365/8),Q=parseFloat(18*e.basic_allowances/365/8),S=parseFloat(12*a/365);if(I[P]<h[P]){var L=h[P]-I[P],G=0;void 0!=u[P]&&(L<=u[P]?(G=L,L=0):(L-=u[P],G=u[P])),a+=parseInt(O*L+Q*G)}if(i==parseInt(e.date.slice(0,4))){var U=e.date;n[P]<U.slice(5,7)?a=0:n[P]==U.slice(5,7)&&(a-=parseInt(S*(parseInt(U.slice(8,10))-1)))}else i<parseInt(e.date.slice(0,4))&&(a=0);Y[P]+=a,n[P]==t&&(A[e._id]=parseFloat(a/h[P]))}}})),l.map((function(e){e.overtime=1*e.assigned-1*e.available,1*e.available==0?e.utilization=0:e.utilization=parseInt(1*e.assigned/e.available*1*100)}));var I=[];s.patients.map((function(e){for(var a in e.revenue)if(a.slice(4,6)==i%100){var r=a.slice(0,3);void 0==I[r]?I[r]=e.revenue[a]:I[r]+=e.revenue[a]}}));var P=[],W=[],O=[];for(var Q in n)void 0==I[Q]&&(I[Q]=0),void 0==Y[Q]&&(Y[Q]=0),W.push(I[Q]),O.push(Y[Q]),P.push(I[Q]-Y[Q]);for(var S=[],L=0;L<3;L++){for(var G=1;G<=b;G++)0==L&&S.push(G),void 0==H[L][G]&&(H[L][G]=0),H[L][G]=parseFloat(H[L][G]/l[L].members).toFixed(2);for(var U=1;U<=12;U++)void 0==N[L][U]&&(N[L][U]=0),N[L][U]=parseFloat(N[L][U]/l[L].members).toFixed(2);H[L].splice(0,1),N[L].splice(0,1)}return(0,g.jsxs)(u.L5,{children:[(0,g.jsxs)(u.uZ,{className:"pt-5 mt-3 align-items-center justify-content-center",children:[(0,g.jsx)(u.TK,{md:"2",children:(0,g.jsx)(v.Z.Group,{children:(0,g.jsx)(v.Z.Control,{type:"number",value:i,placeholder:"Year",min:2022,max:(new Date).getFullYear()+1,onChange:function(a){return e.onChangeYear(a)}})})}),(0,g.jsx)(u.TK,{md:"2",children:(0,g.jsx)(v.Z.Group,{children:(0,g.jsx)(v.Z.Select,{"aria-label":"select",value:t,onChange:function(a){return e.onChangeMonth(a)},children:p})})})]}),(0,g.jsxs)(u.uZ,{className:"mt-3",children:[(0,g.jsx)(u.TK,{children:(0,g.jsxs)(u.Yl,{children:[(0,g.jsx)(u.PH,{src:"https://884863.smushcdn.com/2024606/wp-content/uploads/2006/10/outfit_nurse_clothes_attire_work.jpg?lossy=1&strip=1&webp=1",alt:"...",position:"top"}),(0,g.jsxs)(u.H7,{children:[(0,g.jsx)(u.QM,{children:"Members"}),(0,g.jsx)(u.g9,{className:"mb-1",height:"15",children:(0,g.jsx)(u.F5,{width:"100",valuemin:0,valuemax:100,children:l[2].members})}),(0,g.jsxs)(u.g9,{height:"15",children:[(0,g.jsx)(u.F5,{bgColor:"success",width:0==l[2].members?0:l[0].members/l[2].members*100,valuemin:0,valuemax:100,children:l[0].members}),(0,g.jsx)(u.F5,{bgColor:"info",width:0==l[2].members?0:l[1].members/l[2].members*100,valuemin:0,valuemax:100,children:l[1].members})]})]})]})}),(0,g.jsx)(u.TK,{children:(0,g.jsxs)(u.Yl,{children:[(0,g.jsx)(u.PH,{src:"https://upload.wikimedia.org/wikipedia/commons/c/cd/180726-time-al-1252.webp",alt:"...",position:"top"}),(0,g.jsxs)(u.H7,{children:[(0,g.jsx)(u.QM,{children:"Available"}),(0,g.jsx)(u.g9,{className:"mb-1",height:"15",children:(0,g.jsx)(u.F5,{width:"100",valuemin:0,valuemax:100,children:l[2].available})}),(0,g.jsxs)(u.g9,{height:"15",children:[(0,g.jsx)(u.F5,{bgColor:"success",width:0==l[2].available?0:l[0].available/l[2].available*100,valuemin:0,valuemax:100,children:l[0].available}),(0,g.jsx)(u.F5,{bgColor:"info",width:0==l[2].available?0:l[1].available/l[2].available*100,valuemin:0,valuemax:100,children:l[1].available})]})]})]})}),(0,g.jsx)(u.TK,{children:(0,g.jsxs)(u.Yl,{children:[(0,g.jsx)(u.PH,{src:"https://www.gannett-cdn.com/authoring/2019/02/08/NOKL/ghnewsok-OK-5622432-19aacf4d.jpeg?width=649&height=432&fit=crop&format=pjpg&auto=webp",alt:"...",position:"top"}),(0,g.jsxs)(u.H7,{children:[(0,g.jsx)(u.QM,{children:"Assigned"}),(0,g.jsx)(u.g9,{className:"mb-1",height:"15",children:(0,g.jsx)(u.F5,{width:"100",valuemin:0,valuemax:100,children:l[2].assigned})}),(0,g.jsxs)(u.g9,{height:"15",children:[(0,g.jsx)(u.F5,{bgColor:"success",width:0==l[2].assigned?0:l[0].assigned/l[2].assigned*100,valuemin:0,valuemax:100,children:l[0].assigned}),(0,g.jsx)(u.F5,{bgColor:"info",width:0==l[2].assigned?0:l[1].assigned/l[2].assigned*100,valuemin:0,valuemax:100,children:l[1].assigned})]})]})]})}),(0,g.jsx)(u.TK,{children:(0,g.jsxs)(u.Yl,{children:[(0,g.jsx)(u.PH,{src:"https://blog.axcethr.com/hubfs/flsa-overtime-basics-for-employers%20(1).webp",alt:"...",position:"top"}),(0,g.jsxs)(u.H7,{children:[(0,g.jsx)(u.QM,{children:"Overtime"}),(0,g.jsx)(u.g9,{className:"mb-1",height:"15",children:(0,g.jsx)(u.F5,{width:"100",valuemin:0,valuemax:100,children:l[2].overtime})}),(0,g.jsxs)(u.g9,{height:"15",children:[(0,g.jsx)(u.F5,{bgColor:"success",width:0==l[2].overtime?0:l[0].overtime/l[2].overtime*100,valuemin:0,valuemax:100,children:l[0].overtime}),(0,g.jsx)(u.F5,{bgColor:"info",width:0==l[2].overtime?0:l[1].overtime/l[2].overtime*100,valuemin:0,valuemax:100,children:l[1].overtime})]})]})]})}),(0,g.jsx)(u.TK,{children:(0,g.jsxs)(u.Yl,{children:[(0,g.jsx)(u.PH,{src:"https://russianvagabond.com/wp-content/uploads/2020/03/Webp.net-resizeimage-207.jpg",alt:"...",position:"top"}),(0,g.jsxs)(u.H7,{children:[(0,g.jsx)(u.QM,{children:"Utilization"}),(0,g.jsx)(u.g9,{className:"mb-1",height:"15",children:(0,g.jsx)(u.F5,{width:l[2].utilization,valuemin:0,valuemax:100,children:l[2].utilization+"%"})}),(0,g.jsxs)(u.uZ,{children:[(0,g.jsx)(u.TK,{children:(0,g.jsx)(u.g9,{children:(0,g.jsx)(u.F5,{bgColor:"success",width:l[0].utilization,valuemin:0,valuemax:100,children:l[0].utilization+"%"})})}),(0,g.jsx)(u.TK,{children:(0,g.jsx)(u.g9,{children:(0,g.jsx)(u.F5,{bgColor:"info",width:l[1].utilization,valuemin:0,valuemax:100,children:l[1].utilization+"%"})})})]})]})]})})]}),(0,g.jsxs)(u.uZ,{className:"mt-2",children:[(0,g.jsx)(u.TK,{children:(0,g.jsx)(u.g9,{height:"15",children:(0,g.jsx)(u.F5,{bgColor:"primary",width:"100",valuemin:0,valuemax:100,children:"Total/Average"})})}),(0,g.jsx)(u.TK,{children:(0,g.jsx)(u.g9,{height:"15",children:(0,g.jsx)(u.F5,{bgColor:"success",width:"100",valuemin:0,valuemax:100,children:"Registered"})})}),(0,g.jsx)(u.TK,{children:(0,g.jsx)(u.g9,{height:"15",children:(0,g.jsx)(u.F5,{bgColor:"info",width:"100",valuemin:0,valuemax:100,children:"Assistant"})})})]}),(0,g.jsxs)(u.uZ,{children:[(0,g.jsx)(u.TK,{children:(0,g.jsx)(m.FR,{type:"line",data:{labels:c,datasets:[{label:"Average",backgroundColor:"#00f",borderColor:"#00f",pointBackgroundColor:"#00f",pointBorderColor:"#f00",data:N[2]},{label:"Registered",backgroundColor:"#0f0",borderColor:"#0f0",pointBackgroundColor:"#0f0",pointBorderColor:"#f00",data:N[0]},{label:"Assistant",backgroundColor:"#0dcaf0",borderColor:"#0dcaf0",pointBackgroundColor:"#0dcaf0",pointBorderColor:"#f00",data:N[1]}]},options:{maintainAspectRatio:!0,plugins:{legend:{display:!0}},elements:{line:{tension:.5},point:{radius:3,hitRadius:10,hoverRadius:5,hoverBorderWidth:3}}}})}),(0,g.jsx)(u.TK,{children:(0,g.jsx)(m.FR,{type:"line",data:{labels:c,datasets:[{label:"Revenue",backgroundColor:"#00f",borderColor:"#00f",pointBackgroundColor:"#00f",pointBorderColor:"#f00",data:W},{label:"Payroll",backgroundColor:"#0f0",borderColor:"#0f0",pointBackgroundColor:"#0f0",pointBorderColor:"#f00",data:O},{label:"PNL",backgroundColor:"#0dcaf0",borderColor:"#0dcaf0",pointBackgroundColor:"#0dcaf0",pointBorderColor:"#f00",data:P}]},options:{maintainAspectRatio:!0,plugins:{legend:{display:!0}},elements:{line:{tension:.5},point:{radius:3,hitRadius:10,hoverRadius:5,hoverBorderWidth:3}}}})})]}),(0,g.jsx)(m.FR,{type:"line",data:{labels:S,datasets:[{label:"Average",backgroundColor:"#00f",borderColor:"#00f",pointBackgroundColor:"#00f",pointBorderColor:"#f00",data:H[2]},{label:"Registered",backgroundColor:"#0f0",borderColor:"#0f0",pointBackgroundColor:"#0f0",pointBorderColor:"#f00",data:H[0]},{label:"Assistant",backgroundColor:"#0dcaf0",borderColor:"#0dcaf0",pointBackgroundColor:"#0dcaf0",pointBorderColor:"#f00",data:H[1]}]},options:{maintainAspectRatio:!0,plugins:{legend:{display:!0}},elements:{line:{tension:.5},point:{radius:3,hitRadius:10,hoverRadius:5,hoverBorderWidth:3}}}})]})}}]),i}(c.Component);a.default=(0,h.$j)((function(e){return{basic:e.BasicData}}),null)(p)}}]);
//# sourceMappingURL=900.5167b248.chunk.js.map