"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[262],{7262:function(e,n,t){t.r(n);var a=t(2982),r=t(4942),l=t(1413),s=t(5671),o=t(3144),i=t(7326),c=t(136),u=t(3668),d=t(2791),h=(t(4278),t(9042)),p=t(8970),m=t(7617),x=t(1734),f=t(2248),g=t(3053),j=t(8472),v=t(4373),Z=t(6367),b=t(3513),C=t(5828),y=t.n(C),w=(t(2831),t(6355)),k=t(7392),N=t(8687),I=t(184);y().options={positionClass:"toast-top-full-width",hideDuration:3e3,timeOut:3e3};var T=function(e){(0,c.Z)(t,e);var n=(0,u.Z)(t);function t(e){var a;return(0,s.Z)(this,t),(a=n.call(this,e)).nurseModal=function(e,n){null!==n&&void 0!=n?a.setState({nurse:(0,l.Z)((0,l.Z)({},a.state.nurse),{},{open:e,action_id:n._id,modal:(0,l.Z)((0,l.Z)({},a.state.nurse.modal),n)})}):a.setState({nurse:(0,l.Z)((0,l.Z)({},a.state.nurse),{},{open:e,action_id:"0",modal:{}})})},a.removeNurse=function(e){var n=a.props.basic.requestblocks;if(n.includes(e._id)||n.includes("roaster"))return y().clear(),void setTimeout((function(){return y().warning("This item cannot be requested! Please wait until approver approve the transfer request.")}),300);h.Z.post("nurse/remove",{_id:e._id}).then((function(e){"error"==e.data.state&&(y().clear(),setTimeout((function(){return y().info("nurse remove request error!")}),3e3))})).catch((function(e){console.log(e)}))},a.nurseConfirm=function(){var e=a.state.nurse;if(Object.values(e.modal).filter((function(e){return e})).length<13)y().clear(),setTimeout((function(){return y().info("please input correct!")}),300);else{a.setState((0,l.Z)((0,l.Z)({},a.state),{},{nurse:(0,l.Z)((0,l.Z)({},a.state.nurse),{},{open:!1,modal:{}})}));var n=a.props.basic.requestblocks;if(n.includes(a.state.nurse.modal._id)||n.includes("roaster"))return y().clear(),void setTimeout((function(){return y().warning("This item cannot be requested! Please wait until approver approve the transfer request.")}),300);h.Z.post("nurse/add",(0,l.Z)((0,l.Z)({},a.state.nurse.modal),{},{id:a.state.nurse.action_id})).then((function(e){"error"===e.data.state&&(y().clear(),setTimeout((function(){return y().info("nurse remove request error!")}),3e3))})).catch((function(e){console.log(e)}))}},a.onNurseImageChange=function(e,n){var t,a=e.target.files[0],r=new FileReader;r.onloadend=function(){t=r.result,n.setState({nurse:(0,l.Z)((0,l.Z)({},n.state.nurse),{},{modal:(0,l.Z)((0,l.Z)({},n.state.nurse.modal),{},{image:t})})})},r.readAsDataURL(a)},a.nurseModalChange=function(e,n){a.setState({nurse:(0,l.Z)((0,l.Z)({},a.state.nurse),{},{modal:(0,l.Z)((0,l.Z)({},a.state.nurse.modal),{},(0,r.Z)({},e,n.target.value))})})},a.patientModal=function(e,n){null!==n&&void 0!=n?a.setState({patient:(0,l.Z)((0,l.Z)({},a.state.patient),{},{open:e,action_id:n._id,modal:(0,l.Z)((0,l.Z)({},a.state.patient.modal),n)})}):a.setState({patient:(0,l.Z)((0,l.Z)({},a.state.patient),{},{open:e,action_id:"0",modal:{}})})},a.removePatient=function(e){var n=a.props.basic.requestblocks;if(n.includes(e._id)||n.includes("roaster"))return y().clear(),void setTimeout((function(){return y().warning("This item cannot be requested! Please wait until approver approve the transfer request.")}),300);h.Z.post("patient/remove",{_id:e._id}).then((function(e){"error"==e.data.state&&(y().clear(),setTimeout((function(){return y().info("nurse remove request error!")}),3e3))})).catch((function(e){console.log(e)}))},a.patientConfirm=function(){(0,i.Z)(a);var e=a.state.patient;if(Object.values(e.modal).filter((function(e){return e})).length<5)y().clear(),setTimeout((function(){return y().info("please input correct!")}),300);else{a.setState((0,l.Z)((0,l.Z)({},a.state),{},{patient:(0,l.Z)((0,l.Z)({},a.state.patient),{},{open:!1,modal:{}})}));var n=a.props.basic.requestblocks;if(n.includes(a.state.patient.modal._id)||n.includes("roaster"))return y().clear(),void setTimeout((function(){return y().warning("This item cannot be requested! Please wait until approver approve the transfer request.")}),300);h.Z.post("patient/add",(0,l.Z)((0,l.Z)({},a.state.patient.modal),{},{id:a.state.patient.action_id})).then((function(e){"error"===e.data.state&&(y().clear(),setTimeout((function(){return y().info("nurse remove request error!")}),3e3))})).catch((function(e){console.log(e)}))}},a.onPatientImageChange=function(e,n){var t,a=e.target.files[0],r=new FileReader;r.onloadend=function(){t=r.result,n.setState({patient:(0,l.Z)((0,l.Z)({},n.state.patient),{},{modal:(0,l.Z)((0,l.Z)({},n.state.patient.modal),{},{image:t})})})},r.readAsDataURL(a)},a.patientModalChange=function(e,n){a.setState({patient:(0,l.Z)((0,l.Z)({},a.state.patient),{},{modal:(0,l.Z)((0,l.Z)({},a.state.patient.modal),{},(0,r.Z)({},e,n.target.value))})})},a.onChangeHoliday=function(e,n){var t=a.props.basic,r=((0,i.Z)(a),e>9?"-"+e:"-0"+e),l=t.monthNames[n.month]+r,s=a.props.basic.requestblocks;if(s.includes(l)||s.includes("roaster"))return y().clear(),void setTimeout((function(){return y().warning("This item cannot be requested! Please wait until approver approve the transfer request.")}),300);h.Z.post("basic/holiday/get",{state:n[e].checked,date:l}).then((function(e){"error"==e.data.state&&(y().clear(),setTimeout((function(){return y().info("holiday setting error!")}),3e3))})).catch((function(e){console.log(e)}))},a.state={nurse:{open:!1,action_id:"0",modal:{name:"",designation:"",address:"",image:"",cell:"",code:"",country:"",experience:"",date:"",workexp:"",level:"",basic_allowances:0,housing_allowances:0,other_allowances:0}},patient:{open:!1,action_id:"0",modal:{name:"",specialty:"",address:"",image:"",cell:"",leve:""}},holiday:{month:1,day:1}},a}return(0,o.Z)(t,[{key:"getDesignationArray",value:function(e){return 0==e.level?"Registered":"Assistant"}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,n=this.props.basic,t=this.props.basic,r=t.user,l=t.holidays,s=t.nurses,o=t.patients,i=this.state,c=i.nurse,u=i.patient;s.map((function(n){n.designation=e.getDesignationArray(n)}));var d=[{name:"Full Name",center:!0,wrap:!0,width:"150px",selector:function(e){return e.name}},{name:"Designation",center:!0,wrap:!0,selector:function(e){return e.designation}},{name:"Address",center:!0,wrap:!0,width:"150px",selector:function(e){return e.address}},{name:"Image",center:!0,wrap:!0,width:"70px",cell:function(e){return(0,I.jsx)("img",{src:e.image,style:{width:"65px",height:"50px"}})}},{name:"Cell",center:!0,selector:function(e){return e.cell},sortable:!0},{name:"Country",center:!0,wrap:!0,selector:function(e){return e.country}},{name:"Experience",center:!0,wrap:!0,selector:function(e){return e.experience}},{name:"JoinDate",center:!0,wrap:!0,selector:function(e){return e.date.slice(0,10)},sortable:!0},{name:"WorkExp",center:!0,wrap:!0,selector:function(e){return e.workexp}}];r.hasOwnProperty("role")&&1!==r.role&&(d=[].concat((0,a.Z)(d),[{name:"Action",center:!0,wrap:!0,sortable:!1,cell:function(n){return[(0,I.jsxs)(Z.Ff,{children:[(0,I.jsx)(Z.$v,{outline:!0,color:"success",className:"my-1 ms-1",size:"sm",onClick:function(){return e.nurseModal(!0,n)},children:(0,I.jsx)(w.fmQ,{})}),(0,I.jsx)(Z.$v,{outline:!0,color:"success",className:"my-1 me-1",size:"sm",onClick:function(){return e.removeNurse(n)},children:(0,I.jsx)(w.Xm5,{})})]},n._id)]}}])),s.sort((function(e,n){return e.date>n.date?1:n.date>e.date?-1:0}));var h=[{name:"Full Name",center:!0,wrap:!0,width:"30%",selector:function(e){return e.name}},{name:"Address",center:!0,wrap:!0,width:"30%",selector:function(e){return e.address}},{name:"Image",center:!0,wrap:!0,width:"70px",cell:function(e){return(0,I.jsx)("img",{src:e.image,style:{width:"65px",height:"50px"}})}},{name:"Cell",center:!0,width:"100px",selector:function(e){return e.cell},sortable:!0}];r.hasOwnProperty("role")&&1!==r.role&&(h=[].concat((0,a.Z)(h),[{name:"Action",center:!0,wrap:!0,sortable:!1,cell:function(n){return[(0,I.jsxs)(Z.Ff,{children:[(0,I.jsx)(Z.$v,{outline:!0,color:"success",className:"my-1 ms-1",size:"sm",onClick:function(){return e.patientModal(!0,n)},children:(0,I.jsx)(w.fmQ,{})}),(0,I.jsx)(Z.$v,{outline:!0,color:"success",className:"my-1 me-1",size:"sm",onClick:function(){return e.removePatient(n)},children:(0,I.jsx)(w.Xm5,{})})]},n._id)]}}])),o.sort((function(e,n){return e.name>n.name?1:n.name>e.name?-1:0}));var C=[],y=[];C.push({name:"Month",center:!0,wrap:!0,width:"70px",padding:"3px",selector:function(e){return e.month}});for(var k=function(n){C.push({name:n,center:!0,width:"2.4vw",wrap:!0,cell:function(t){return(0,I.jsx)(p.Z.Check,{disabled:!(!r.hasOwnProperty("role")||1!==r.role),checked:t[n].checked,type:"checkbox",isValid:!0,style:{display:t[n].disabled},onChange:function(){return e.onChangeHoliday(n,t)}})}})},N=1;N<=31;N++)k(N);var T=n.monthNames,_=(new Date).getFullYear();for(var M in T){var S=[],A=T[M],K=new Date(_,A,0).getDate();S.month=M;for(var P=1;P<=31;P++){S[P]=[],S[P].checked=!1,S[P].disabled="block";var H=P>9?P:"0"+P;l.includes(A+"-"+H)&&(S[P].checked=!0),P>K&&(S[P].disabled="none")}y.push(S)}return(0,I.jsxs)(Z.L5,{children:[(0,I.jsx)("div",{className:"pt-5 text-center text-dark",children:(0,I.jsx)("h1",{className:"mt-3",children:"Registration"})}),(0,I.jsx)(Z.uZ,{children:(0,I.jsx)(Z.TK,{children:(0,I.jsxs)(m.Z,{id:"basic_tab",children:[(0,I.jsxs)(x.Z,{eventKey:"nurse",title:"nurse",className:"p-2",children:[r.hasOwnProperty("role")&&1!==r.role&&(0,I.jsx)(Z.$v,{outline:!0,rounded:!0,color:"success",onClick:function(){return e.nurseModal(!0,null)},children:"Add Nurse"}),(0,I.jsxs)(j.CSVLink,{headers:[{label:"Full Name",key:"name"},{label:"Designation",key:"designation"},{label:"Address",key:"address"},{label:"Cell",key:"cell"},{label:"Country",key:"country"},{label:"Experience",key:"experience"},{label:"JoinDate",key:"date"},{label:"WorkExp",key:"workexp"},{label:"Basic Allowances",key:"basic_allowances"},{label:"Housing Allowances",key:"housing_allowances"},{label:"Other Allowances",key:"other_allowances"}],data:s,filename:"nurses.csv",className:"btn btn-success ",target:"_blank",children:[(0,I.jsx)(v.Cb8,{}),"Export"]}),(0,I.jsx)("div",{className:"p-2",children:(0,I.jsx)(b.ZP,{id:"nurseTable",columns:d,data:s,fixedHeader:!0,fixedHeaderScrollHeight:"65vh",defaultPageSize:100,pagination:!0})})]},1),(0,I.jsx)(x.Z,{eventKey:"patient",title:"patient",className:"p-2",children:(0,I.jsxs)(Z.uZ,{children:[(0,I.jsxs)(Z.TK,{children:[r.hasOwnProperty("role")&&1!==r.role&&(0,I.jsx)(Z.$v,{outline:!0,rounded:!0,color:"success",onClick:function(){return e.patientModal(!0)},children:"Add Patient"}),(0,I.jsxs)(j.CSVLink,{headers:[{label:"Full Name",key:"name"},{label:"Address",key:"address"},{label:"Cell",key:"cell"}],data:o,filename:"patients.csv",className:"btn btn-success ",target:"_blank",children:[(0,I.jsx)(v.Cb8,{}),"Export"]})]}),(0,I.jsx)("div",{className:"p-2",children:(0,I.jsx)(b.ZP,{columns:h,data:o,fixedHeader:!0,fixedHeaderScrollHeight:"65vh",defaultPageSize:100,pagination:!0})})]})},2),(0,I.jsx)(x.Z,{eventKey:"holiday",title:"holiday",className:"p-2",children:(0,I.jsx)(Z.uZ,{children:(0,I.jsx)(b.ZP,{id:"holidayTable",fixedHeader:!0,fixedHeaderScrollHeight:"70vh",columns:C,data:y})})},3)]})})}),(0,I.jsxs)(f.Z,{show:c.open,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:function(){return e.nurseModal(!1)},children:[(0,I.jsx)(f.Z.Header,{closeButton:!0,children:(0,I.jsxs)(f.Z.Title,{children:["Nurse ","0"==c.action_id?"Insert":"Edit"]})}),(0,I.jsxs)(f.Z.Body,{children:[(0,I.jsxs)(Z.uZ,{className:"mb-2",children:[(0,I.jsx)(Z.TK,{children:(0,I.jsx)("img",{alt:"No Image",src:c.modal.image,style:{width:"90px",height:"120px"}})}),(0,I.jsx)(Z.TK,{children:(0,I.jsxs)(p.Z.Group,{controlId:"ImageInput",className:"mt-3",children:[(0,I.jsx)(p.Z.Label,{children:"Select Image File"}),(0,I.jsx)(p.Z.Control,{type:"file",accept:"image/*",onChange:function(n){return e.onNurseImageChange(n,e)}})]})})]}),(0,I.jsxs)(Z.uZ,{className:"mb-2",children:[(0,I.jsx)(Z.TK,{children:(0,I.jsx)(g.Z,{controlId:"NameInput",label:"Full Name",children:(0,I.jsx)(p.Z.Control,{type:"text",value:c.modal.name,onChange:function(n){return e.nurseModalChange("name",n)},placeholder:"Full Name"})})}),(0,I.jsx)(Z.TK,{children:(0,I.jsx)(g.Z,{controlId:"AddressInput",label:"Address",children:(0,I.jsx)(p.Z.Control,{type:"text",value:c.modal.address,onChange:function(n){return e.nurseModalChange("address",n)},placeholder:"Address"})})})]}),(0,I.jsxs)(Z.uZ,{className:"mb-2",children:[(0,I.jsx)(Z.TK,{md:"2",children:(0,I.jsx)(g.Z,{controlId:"CellInput",label:"Cell",children:(0,I.jsx)(p.Z.Control,{type:"number",value:c.modal.cell,onChange:function(n){return e.nurseModalChange("cell",n)},placeholder:"Cell"})})}),(0,I.jsx)(Z.TK,{md:"2",children:(0,I.jsx)(g.Z,{controlId:"CodeInput",label:"Code",children:(0,I.jsx)(p.Z.Control,{type:"text",value:c.modal.code,onChange:function(n){return e.nurseModalChange("code",n)},placeholder:"Code"})})}),(0,I.jsx)(Z.TK,{md:"3",children:(0,I.jsx)(g.Z,{controlId:"DateInput",label:"Joining Date",children:(0,I.jsx)(p.Z.Control,{type:"date",value:c.modal.date?c.modal.date.slice(0,10):"",onChange:function(n){return e.nurseModalChange("date",n)},placeholder:"Joining Date"})})}),(0,I.jsx)(Z.TK,{md:"5",children:(0,I.jsx)(g.Z,{controlId:"CountryInput",label:"Original Country",children:(0,I.jsx)(p.Z.Control,{type:"text",value:c.modal.country,onChange:function(n){return e.nurseModalChange("country",n)},placeholder:"Original Country"})})})]}),(0,I.jsxs)(Z.uZ,{className:"mb-2",children:[(0,I.jsx)(Z.TK,{children:(0,I.jsx)(g.Z,{controlId:"ExperienceInput",label:"Experience",children:(0,I.jsx)(p.Z.Control,{type:"text",value:c.modal.experience,onChange:function(n){return e.nurseModalChange("experience",n)},placeholder:"Experience"})})}),(0,I.jsx)(Z.TK,{children:(0,I.jsx)(g.Z,{controlId:"SpecialtyInput",label:"Specialty",children:(0,I.jsx)(p.Z.Control,{type:"text",value:c.modal.workexp,onChange:function(n){return e.nurseModalChange("workexp",n)},placeholder:"Specialty"})})}),(0,I.jsx)(Z.TK,{children:(0,I.jsxs)(p.Z.Select,{"aria-label":"patient select",value:c.modal.level,style:{height:"100%"},onChange:function(n){return e.nurseModalChange("level",n)},children:[(0,I.jsx)("option",{value:"",children:"Select Here"}),(0,I.jsx)("option",{value:"0",children:"Registered Nurse"}),(0,I.jsx)("option",{value:"1",children:"Assistant Nurse"})]})})]}),(0,I.jsxs)(Z.uZ,{className:"mb-2",children:[(0,I.jsx)(Z.TK,{children:(0,I.jsx)(g.Z,{controlId:"BasicInput",label:"Basic Allowance",children:(0,I.jsx)(p.Z.Control,{type:"number",value:c.modal.basic_allowances,onChange:function(n){return e.nurseModalChange("basic_allowances",n)},placeholder:"Basic Allowance"})})}),(0,I.jsx)(Z.TK,{children:(0,I.jsx)(g.Z,{controlId:"HousingInput",label:"Housing Allowance",children:(0,I.jsx)(p.Z.Control,{type:"number",value:c.modal.housing_allowances,onChange:function(n){return e.nurseModalChange("housing_allowances",n)},placeholder:"Housing Allowance"})})}),(0,I.jsx)(Z.TK,{children:(0,I.jsx)(g.Z,{controlId:"OtherInput",label:"Other Allowance",children:(0,I.jsx)(p.Z.Control,{type:"number",value:c.modal.other_allowances,onChange:function(n){return e.nurseModalChange("other_allowances",n)},placeholder:"Other Allowance"})})})]})]}),(0,I.jsxs)(f.Z.Footer,{children:[(0,I.jsx)(Z.$v,{type:"button",className:"btn btn-secondary",onClick:function(){return e.nurseModal(!1)},children:"Close"}),(0,I.jsx)(Z.$v,{type:"button",className:"btn btn-success",onClick:function(){return e.nurseConfirm()},children:"Save"})]})]}),(0,I.jsxs)(f.Z,{show:u.open,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:function(){return e.patientModal(!1)},children:[(0,I.jsx)(f.Z.Header,{closeButton:!0,children:(0,I.jsxs)(f.Z.Title,{children:["Patient ","0"==u.action_id?"Insert":"Edit"]})}),(0,I.jsxs)(f.Z.Body,{children:[(0,I.jsxs)(Z.uZ,{className:"mb-2 text-center",children:[(0,I.jsx)(Z.TK,{children:(0,I.jsx)("img",{alt:"No Image",src:u.modal.image,style:{width:"90px",height:"120px"}})}),(0,I.jsx)(Z.TK,{children:(0,I.jsxs)(p.Z.Group,{controlId:"ImageInput",className:"mt-3",children:[(0,I.jsx)(p.Z.Label,{children:"Select Image File"}),(0,I.jsx)(p.Z.Control,{type:"file",accept:"image/*",onChange:function(n){return e.onPatientImageChange(n,e)}})]})})]}),(0,I.jsxs)(Z.uZ,{children:[(0,I.jsx)(Z.TK,{children:(0,I.jsx)(g.Z,{controlId:"NameInput",label:"Full Name",className:"mb-3",children:(0,I.jsx)(p.Z.Control,{type:"text",value:u.modal.name,onChange:function(n){return e.patientModalChange("name",n)},placeholder:"Full Name"})})}),(0,I.jsx)(Z.TK,{children:(0,I.jsx)(g.Z,{controlId:"SpecialtyInput",label:"Specialty",className:"mb-3",children:(0,I.jsx)(p.Z.Control,{type:"text",value:u.modal.specialty,onChange:function(n){return e.patientModalChange("specialty",n)},placeholder:"Full Name"})})})]}),(0,I.jsx)(Z.uZ,{children:(0,I.jsx)(Z.TK,{children:(0,I.jsx)(g.Z,{controlId:"AddressInput",label:"Address",className:"mb-3",children:(0,I.jsx)(p.Z.Control,{type:"text",value:u.modal.address,onChange:function(n){return e.patientModalChange("address",n)},placeholder:"Address"})})})}),(0,I.jsxs)(Z.uZ,{className:"mb-3",children:[(0,I.jsx)(Z.TK,{children:(0,I.jsx)(g.Z,{controlId:"CellInput",label:"Cell Number",children:(0,I.jsx)(p.Z.Control,{type:"number",value:u.modal.cell,onChange:function(n){return e.patientModalChange("cell",n)},placeholder:"Cell Number"})})}),(0,I.jsx)(Z.TK,{children:(0,I.jsxs)(p.Z.Select,{"aria-label":"patient select",value:c.modal.level,style:{height:"100%"},onChange:function(n){return e.patientModalChange("level",n)},children:[(0,I.jsx)("option",{value:"",children:"Select Level"}),(0,I.jsx)("option",{value:"1",children:"Level 1"}),(0,I.jsx)("option",{value:"2",children:"Level 2"}),(0,I.jsx)("option",{value:"3",children:"Level 3"}),(0,I.jsx)("option",{value:"4",children:"Level 4"}),(0,I.jsx)("option",{value:"5",children:"Office Work"})]})})]})]}),(0,I.jsxs)(f.Z.Footer,{children:[(0,I.jsx)(Z.$v,{variant:"secondary",onClick:function(){return e.patientModal(!1)},children:"Close"}),(0,I.jsx)(Z.$v,{variant:"success",onClick:function(){return e.patientConfirm()},children:"Save"})]})]})]})}}]),t}(d.Component);n.default=(0,N.$j)((function(e){return{basic:e.BasicData}}),(function(e){return{nurseInsert:function(n){return e((0,k.fw)(n))},nurseUpdate:function(n){return e((0,k.it)(n))},nurseRemove:function(n){return e((0,k.KT)(n))},patientInsert:function(n){return e((0,k.WB)(n))},patientUpdate:function(n){return e((0,k.Ri)(n))},patientRemove:function(n){return e((0,k.lW)(n))},holidaySet:function(n){return e((0,k.$Z)(n))}}}))(T)}}]);
//# sourceMappingURL=262.37a5e24d.chunk.js.map