"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[600],{9600:function(e,n,t){t.r(n);var a=t(2982),r=t(7762),s=t(1413),o=t(5671),l=t(3144),i=t(136),u=t(3668),c=t(2791),d=t(8687),h=t(3513),v=t(6367),g=t(4373),m=t(8472),f=t(8970),p=(t(4278),t(8492)),y=t.n(p),k=t(184),w=function(e){(0,i.Z)(t,e);var n=(0,u.Z)(t);function t(e){var a;(0,o.Z)(this,t),(a=n.call(this,e)).onChangeYear=function(e){a.setState((0,s.Z)((0,s.Z)({},a.state),{},{selYear:e.target.value}))},a.onChangeDesignation=function(e){a.setState((0,s.Z)((0,s.Z)({},a.state),{},{selDesignation:e.target.value}))},a.onChangeNurse=function(e){a.setState((0,s.Z)((0,s.Z)({},a.state),{},{selNurse:0,selNurseValue:e.target.value}))},a.OnSelectNurse=function(e,n){a.setState((0,s.Z)((0,s.Z)({},a.state),{},{selNurse:n.key,selNurseValue:e}))},a.onChangeMonth=function(e){a.setState((0,s.Z)((0,s.Z)({},a.state),{},{selMonth:e.target.value}))};var r=(new Date).getFullYear();return a.state={selYear:r,selNurse:0,selNurseValue:"",selMonth:"00",selDesignation:-1},a}return(0,l.Z)(t,[{key:"getTotals",value:function(e,n){var t=0;return e.forEach((function(e){t+=e[n]?e[n]:0})),t}},{key:"swap",value:function(e){var n=[];for(var t in e)n[e[t]]=t;return n}},{key:"render",value:function(){var e=this,n=this.state,t=n.selYear,s=n.selMonth,o=n.selDesignation,l=n.selNurseValue,i=n.selNurse,u=this.props.basic,c=u.monthNames,d=this.swap(c),p=Object.keys(c),w=Object.values(c),x=p.map((function(e,n){return(0,k.jsx)("option",{value:w[n],children:e},n)})),b=[],D=0,j=0,Z=0,N=[],C=[];u.nurses.map((function(e){var n;N[e._id]=e.name,null!==(n=e.name)&&void 0!==n&&n.includes(l)&&C.push({label:e.name,key:e._id})}));var S=0;u.nurses.map((function(e){"-1"!=o&&parseInt(e.level)!=o||e._id!=i&&0!=i||(e.rota.map((function(e){t==new Date(e.date).getFullYear()&&(S=1)})),1==S&&function(){var n=u.holidays,o=[];n.map((function(e){var n=d[e.slice(0,2)];void 0==o[n]&&(o[n]=[]),o[n].push(t+"-"+s+"-"+e)}));var l=[];for(var i in d)for(var h=new Date(t,i,0).getDate(),v=new Date(t+"-"+i+"-01").getDay(),g=v=0==v?1:7-v+1;g<h;g+=7){var m=g>9?g:"0"+g,f=d[i];void 0==l[f]&&(l[f]=[]),l[f].push(t+"-"+i+"-"+m)}var p,y=e.leave?e.leave:[],k=[],w=(0,r.Z)(y);try{for(w.s();!(p=w.n()).done;)for(var x=p.value,N=new Date(x.from),C=new Date(x.to),S=N;S<=C;){var M=S.getFullYear(),T=S.getMonth()+1>9?S.getMonth()+1:"0"+(S.getMonth()+1),Y=S.getDate()>9?S.getDate():"0"+S.getDate();if(M==t){var H=d[T];void 0==k[H]&&(k[H]=[]),k[H].push(M+"-"+T+"-"+Y)}S.setDate(S.getDate()+1)}}catch(A){w.e(A)}finally{w.f()}var E=[];for(var F in c)if(c[F]==s){var O=new Date(t,c[F],0).getDate();void 0==k[F]&&(k[F]=[]),void 0==o[F]&&(o[F]=[]),void 0==l[F]&&(l[F]=[]);var V=[].concat((0,a.Z)(k[F]),(0,a.Z)(o[F]),(0,a.Z)(l[F]));V=(0,a.Z)(new Set(V));var W=e.rota;E[F]=0,W.map((function(e){if(t==new Date(e.date).getFullYear()){var n=d[[e.date.slice(5,7)]];void 0==E[n]||(E[n]+=e.hour,D+=e.hour)}}));var K={month:F,days:O,code:e.code,name:e.name,leave:y,designation:0==e.level?"Registered":"Assistant",sundays:l[F].length,holidays:o[F].length,leavedays:k[F].length,leaves:k[F].length,workingdays:O-V.length,hour:E[F],totalhours:8*(O-V.length),overtime:E[F]-8*(O-V.length)};j+=K.totalhours,Z+=K.overtime,b.push(K)}}())})),b.sort((function(e,n){return e.name>n.name?1:n.name>e.name?-1:0}));var M={code:"Total",hour:D,totalhours:j,overtime:Z};b.push(M);return(0,k.jsxs)(v.L5,{children:[(0,k.jsx)("div",{className:"pt-5 text-center text-dark",children:(0,k.jsx)("h1",{className:"mt-3",children:"Full Time Equivalent (FTE) "})}),(0,k.jsxs)(v.uZ,{className:" align-items-center justify-content-center",children:[(0,k.jsx)(v.TK,{className:"autocomplete col-md-3 ncard",children:(0,k.jsx)(y(),{getItemValue:function(e){return e.label},items:C,inputProps:{placeholder:"Select Nurses"},renderItem:function(e,n){return(0,k.jsx)("div",{style:{background:n?"#2E86C1":"white",color:n?"white":"black",borderRadius:"1px",backgroundColor:"white",fontSize:"15px",fontFamily:"Arial"},children:e.label})},value:l,onChange:function(n){return e.onChangeNurse(n)},onSelect:function(n,t){return e.OnSelectNurse(n,t)}})}),(0,k.jsx)(v.TK,{md:"2",children:(0,k.jsxs)(f.Z.Select,{"aria-label":"select",value:o,onChange:function(n){return e.onChangeDesignation(n)},children:[(0,k.jsx)("option",{value:"-1",children:"Designation"}),(0,k.jsx)("option",{value:"0",children:"Registered"}),(0,k.jsx)("option",{value:"1",children:"Assistant"})]})}),(0,k.jsx)(v.TK,{md:"2",children:(0,k.jsx)(f.Z.Group,{children:(0,k.jsx)(f.Z.Control,{type:"number",value:t,placeholder:"Year",onChange:function(n){return e.onChangeYear(n)}})})}),(0,k.jsx)(v.TK,{md:"2",children:(0,k.jsxs)(f.Z.Select,{"aria-label":"select",value:s,onChange:function(n){return e.onChangeMonth(n)},children:[(0,k.jsx)("option",{value:"00",children:"Month"}),x]})}),(0,k.jsx)(v.TK,{md:"2",children:(0,k.jsxs)(m.CSVLink,{headers:[{label:"Emp Code",key:"code"},{label:"Name",key:"name"},{label:"Designation",key:"designation"},{label:"Month Days",key:"days"},{label:"Sundays",key:"sundays"},{label:"Leaves",key:"leaves"},{label:"Holidays",key:"holidays"},{label:"Net Working Days",key:"workingdays"},{label:"Working Hours Available",key:"totalhours"},{label:"Hours Worked",key:"hour"},{label:"Overtime",key:"overtime"}],data:b,filename:"FTE.csv",className:"btn btn-success ",target:"_blank",children:[(0,k.jsx)(g.Cb8,{}),"Export"]})})]}),(0,k.jsx)(v.uZ,{className:"mt-2 workingTable",children:(0,k.jsx)(h.ZP,{columns:[{name:"Emp Code",center:!0,wrap:!0,width:"120px",selector:function(e){return e.code}},{name:"Name",center:!0,wrap:!0,width:"120px",selector:function(e){return e.name}},{name:"Designation",center:!0,wrap:!0,width:"120px",selector:function(e){return e.designation}},{name:"Month Days",center:!0,wrap:!0,width:"100px",selector:function(e){return e.days}},{name:"Sundays",center:!0,selector:function(e){return e.sundays}},{name:"Leaves",center:!0,wrap:!0,selector:function(e){return e.leaves}},{name:"Holidays",center:!0,wrap:!0,width:"100px",selector:function(e){return e.holidays}},{name:"Net Working Days",center:!0,width:"150px",selector:function(e){return e.workingdays}},{name:"Working Hours available",center:!0,wrap:!0,width:"170px",selector:function(e){return e.totalhours}},{name:"Hours Worked",center:!0,wrap:!0,selector:function(e){return e.hour}},{name:"Overtime",center:!0,wrap:!0,selector:function(e){return e.overtime}}],data:b,fixedHeader:!0,striped:!0,conditionalRowStyles:[{when:function(e){return 1==e.rotation},style:function(e){return{backgroundColor:e.day%2==1?"rgb(160,160,160)":"rgb(192,192,192)"}}}],fixedHeaderScrollHeight:"60vh",pagination:!0})})]})}}]),t}(c.Component);n.default=(0,d.$j)((function(e){return{basic:e.BasicData}}),null)(w)}}]);
//# sourceMappingURL=600.982ca5ee.chunk.js.map