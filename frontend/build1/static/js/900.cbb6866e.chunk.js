"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[900],{8900:function(e,a,i){i.r(a);var t=i(2982),s=i(7762),r=i(1413),n=i(5671),l=i(3144),o=i(136),d=i(3668),h=i(2791),c=(i(4278),i(8687)),u=i(6367),v=i(8970),m=i(3076),g=i(184),p=function(e){(0,o.Z)(i,e);var a=(0,d.Z)(i);function i(e){var t;(0,n.Z)(this,i),(t=a.call(this,e)).onChangeYear=function(e){t.setState((0,r.Z)((0,r.Z)({},t.state),{},{selYear:e.target.value}))},t.onChangeMonth=function(e){t.setState((0,r.Z)((0,r.Z)({},t.state),{},{selMonth:e.target.value}))};var s=new Date,l=s.getFullYear(),o=s.getMonth()+1>9?s.getMonth()+1:"0"+(s.getMonth()+1);return t.state={selYear:l,selMonth:o},t}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"swap",value:function(e){var a=[];for(var i in e)a[e[i]]=i;return a}},{key:"render",value:function(){var e=this,a=this.state,i=a.selYear,r=a.selMonth,n=this.props.basic,l=[{members:0,available:0,assigned:0,overtime:0,utilization:0},{members:0,available:0,assigned:0,overtime:0,utilization:0},{members:0,available:0,assigned:0,overtime:0,utilization:0}],o=n.monthNames,d=this.swap(o),h=Object.keys(o),c=Object.values(o),p=h.map((function(e,a){return(0,g.jsx)("option",{value:c[a],children:e},a)})),x=new Date(i,r,0).getDate(),b=i+"-"+r+"-01",j=i+"-"+r+"-"+x,f=n.holidays,w=[],C=[];f.map((function(e){var a=d[e.slice(0,2)];void 0==C[a]&&(C[a]=[]),C[a].push(i+"-"+e),parseInt(e.slice(0,2))==r&&w.push(i+"-"+e)}));var F=[],k=new Date(i+"-"+r+"-01").getDay();0==k&&(k=7);for(var Z=k;Z<x;Z+=7){var D=Z>9?Z:"0"+Z;F.push(i+"-"+r+"-"+D)}var y=[];for(var M in d)for(var _=new Date(i,M,0).getDate(),K=new Date(i+"-"+M+"-01").getDay(),B=K=0==K?1:7-K+1;B<_;B+=7){var T=B>9?B:"0"+B,Y=d[M];void 0==y[Y]&&(y[Y]=[]),y[Y].push(i+"-"+M+"-"+T)}var z=[],N=[],R=[],H=[],I=[];H[0]=[],H[1]=[],H[2]=[],I[0]=[],I[1]=[],I[2]=[],n.nurses.map((function(e){var a=e.basic_allowances+e.housing_allowances+e.other_allowances,n=e.level;l[n].members++,l[2].members++;var h=e.rota,c=[],u=[];h.map((function(a){if(a.date>=b&&a.date<=j&&(l[n].assigned+=1*a.hour,l[2].assigned+=1*a.hour),a.date.startsWith(i)){var t=parseInt(a.date.slice(5,7)),s=d[[a.date.slice(5,7)]],o=parseInt(a.date.slice(8,10));void 0==c[s]?c[s]=a.hour:c[s]+=a.hour,void 0==H[n][t]?H[n][t]=a.hour:H[n][t]+=a.hour,void 0==H[2][t]?H[2][t]=a.hour:H[2][t]+=a.hour,a.date.startsWith(i+"-"+r)&&(void 0==I[n][o]?I[n][o]=a.hour:I[n][o]+=a.hour,void 0==I[2][o]?I[2][o]=a.hour:I[2][o]+=a.hour),void 0!=C[s]&&C[s].includes(a.date)&&(void 0==u[s]?u[s]=a.hour:u[s]+=a.hour),a.date.slice(5,7)==r&&(void 0==N[a.patient_id]&&(N[a.patient_id]=[]),void 0==N[a.patient_id][e._id]?N[a.patient_id][e._id]=a.hour:N[a.patient_id][e._id]+=a.hour)}}));var v,m=e.leave,g=[],p=(0,s.Z)(m);try{for(p.s();!(v=p.n()).done;)for(var f=v.value,k=new Date(f.from),Z=new Date(f.to),D=k;D<=Z;){var M=D.getFullYear(),_=D.getMonth()+1>9?D.getMonth()+1:"0"+(D.getMonth()+1),K=D.getDate()>9?D.getDate():"0"+D.getDate();if(M==i&&_==r&&g.push(M+"-"+_+"-"+K),M==i){var B=d[_];void 0==g[B]&&(g[B]=[]),g[B].push(M+"-"+_+"-"+K)}D.setDate(D.getDate()+1)}}catch($){p.e($)}finally{p.f()}var T=[].concat(g,w,F);T=(0,t.Z)(new Set(T)),l[n].available+=8*(x-T.length),l[2].available+=8*(x-T.length);var Y=[],A=[];for(var P in o){var O=new Date(i,o[P],0).getDate();if(void 0==g[P]&&(g[P]=[]),void 0==C[P]&&(C[P]=[]),void 0==y[P]&&(y[P]=[]),Y[P]=[].concat((0,t.Z)(g[P]),(0,t.Z)(C[P]),(0,t.Z)(y[P])),Y[P]=(0,t.Z)(new Set(Y[P])),A[P]=8*(O-Y[P].length),void 0==c[P]&&(c[P]=0),void 0==u[P]&&(u[P]=0),void 0==z[P]&&(z[P]=0),c[P]){var Q=parseFloat(15*e.basic_allowances/365/8),S=parseFloat(18*e.basic_allowances/365/8),W=parseFloat(12*a/365);if(A[P]<c[P]){var L=c[P]-A[P],G=0;void 0!=u[P]&&(L<=u[P]?(G=L,L=0):(L-=u[P],G=u[P])),a+=parseInt(Q*L+S*G)}if(i==parseInt(e.date.slice(0,4))){var U=e.date;o[P]<U.slice(5,7)?a=0:o[P]==U.slice(5,7)&&(a-=parseInt(W*(parseInt(U.slice(8,10))-1)))}else i<parseInt(e.date.slice(0,4))&&(a=0);z[P]+=a,o[P]==r&&(R[e._id]=parseFloat(a/c[P]))}}})),l.map((function(e){e.overtime=1*e.assigned-1*e.available,1*e.available==0?e.utilization=0:e.utilization=parseInt(1*e.assigned/e.available*1*100)}));var A=[];n.patients.map((function(e){for(var a in e.revenue)if(a.slice(4,6)==i%100){var t=a.slice(0,3);void 0==A[t]?A[t]=e.revenue[a]:A[t]+=e.revenue[a]}}));var P=[],O=[],Q=[];for(var S in o)void 0==A[S]&&(A[S]=0),void 0==z[S]&&(z[S]=0),O.push(A[S]),Q.push(z[S]),P.push(A[S]-z[S]);for(var W=[],L=0;L<3;L++){for(var G=1;G<=x;G++)0==L&&W.push(G),void 0==I[L][G]&&(I[L][G]=0),I[L][G]=parseFloat(I[L][G]/l[L].members).toFixed(2);for(var U=1;U<=12;U++)void 0==H[L][U]&&(H[L][U]=0),H[L][U]=parseFloat(H[L][U]/l[L].members).toFixed(2);I[L].splice(0,1),H[L].splice(0,1)}return(0,g.jsxs)(u.L5,{children:[(0,g.jsxs)(u.uZ,{className:"pt-5 mt-3 align-items-center justify-content-center",children:[(0,g.jsx)(u.TK,{md:"2",children:(0,g.jsx)(v.Z.Group,{children:(0,g.jsx)(v.Z.Control,{type:"number",value:i,placeholder:"Year",min:2022,max:(new Date).getFullYear()+1,onChange:function(a){return e.onChangeYear(a)}})})}),(0,g.jsx)(u.TK,{md:"2",children:(0,g.jsx)(v.Z.Group,{children:(0,g.jsx)(v.Z.Select,{"aria-label":"select",value:r,onChange:function(a){return e.onChangeMonth(a)},children:p})})})]}),(0,g.jsxs)(u.uZ,{className:"mt-3",children:[(0,g.jsx)(u.TK,{children:(0,g.jsxs)(u.Yl,{children:[(0,g.jsx)(u.PH,{src:"https://884863.smushcdn.com/2024606/wp-content/uploads/2006/10/outfit_nurse_clothes_attire_work.jpg?lossy=1&strip=1&webp=1",alt:"...",position:"top"}),(0,g.jsxs)(u.H7,{children:[(0,g.jsx)(u.QM,{children:"Members"}),(0,g.jsx)(u.g9,{className:"mb-1",height:"15",children:(0,g.jsx)(u.F5,{width:"100",valuemin:0,valuemax:100,children:l[2].members})}),(0,g.jsxs)(u.g9,{height:"15",children:[(0,g.jsx)(u.F5,{bgColor:"success",width:0==l[2].members?0:l[0].members/l[2].members*100,valuemin:0,valuemax:100,children:l[0].members}),(0,g.jsx)(u.F5,{bgColor:"info",width:0==l[2].members?0:l[1].members/l[2].members*100,valuemin:0,valuemax:100,children:l[1].members})]})]})]})}),(0,g.jsx)(u.TK,{children:(0,g.jsxs)(u.Yl,{children:[(0,g.jsx)(u.PH,{src:"https://upload.wikimedia.org/wikipedia/commons/c/cd/180726-time-al-1252.webp",alt:"...",position:"top"}),(0,g.jsxs)(u.H7,{children:[(0,g.jsx)(u.QM,{children:"Available"}),(0,g.jsx)(u.g9,{className:"mb-1",height:"15",children:(0,g.jsx)(u.F5,{width:"100",valuemin:0,valuemax:100,children:l[2].available})}),(0,g.jsxs)(u.g9,{height:"15",children:[(0,g.jsx)(u.F5,{bgColor:"success",width:0==l[2].available?0:l[0].available/l[2].available*100,valuemin:0,valuemax:100,children:l[0].available}),(0,g.jsx)(u.F5,{bgColor:"info",width:0==l[2].available?0:l[1].available/l[2].available*100,valuemin:0,valuemax:100,children:l[1].available})]})]})]})}),(0,g.jsx)(u.TK,{children:(0,g.jsxs)(u.Yl,{children:[(0,g.jsx)(u.PH,{src:"https://www.gannett-cdn.com/authoring/2019/02/08/NOKL/ghnewsok-OK-5622432-19aacf4d.jpeg?width=649&height=432&fit=crop&format=pjpg&auto=webp",alt:"...",position:"top"}),(0,g.jsxs)(u.H7,{children:[(0,g.jsx)(u.QM,{children:"Assigned"}),(0,g.jsx)(u.g9,{className:"mb-1",height:"15",children:(0,g.jsx)(u.F5,{width:"100",valuemin:0,valuemax:100,children:l[2].assigned})}),(0,g.jsxs)(u.g9,{height:"15",children:[(0,g.jsx)(u.F5,{bgColor:"success",width:0==l[2].assigned?0:l[0].assigned/l[2].assigned*100,valuemin:0,valuemax:100,children:l[0].assigned}),(0,g.jsx)(u.F5,{bgColor:"info",width:0==l[2].assigned?0:l[1].assigned/l[2].assigned*100,valuemin:0,valuemax:100,children:l[1].assigned})]})]})]})}),(0,g.jsx)(u.TK,{children:(0,g.jsxs)(u.Yl,{children:[(0,g.jsx)(u.PH,{src:"https://blog.axcethr.com/hubfs/flsa-overtime-basics-for-employers%20(1).webp",alt:"...",position:"top"}),(0,g.jsxs)(u.H7,{children:[(0,g.jsx)(u.QM,{children:"Overtime"}),(0,g.jsx)(u.g9,{className:"mb-1",height:"15",children:(0,g.jsx)(u.F5,{width:"100",valuemin:0,valuemax:100,children:l[2].overtime})}),(0,g.jsxs)(u.g9,{height:"15",children:[(0,g.jsx)(u.F5,{bgColor:"success",width:0==l[2].overtime?0:l[0].overtime/l[2].overtime*100,valuemin:0,valuemax:100,children:l[0].overtime}),(0,g.jsx)(u.F5,{bgColor:"info",width:0==l[2].overtime?0:l[1].overtime/l[2].overtime*100,valuemin:0,valuemax:100,children:l[1].overtime})]})]})]})}),(0,g.jsx)(u.TK,{children:(0,g.jsxs)(u.Yl,{children:[(0,g.jsx)(u.PH,{src:"https://russianvagabond.com/wp-content/uploads/2020/03/Webp.net-resizeimage-207.jpg",alt:"...",position:"top"}),(0,g.jsxs)(u.H7,{children:[(0,g.jsx)(u.QM,{children:"Utilization"}),(0,g.jsx)(u.g9,{className:"mb-1",height:"15",children:(0,g.jsx)(u.F5,{width:l[2].utilization,valuemin:0,valuemax:100,children:l[2].utilization+"%"})}),(0,g.jsxs)(u.uZ,{children:[(0,g.jsx)(u.TK,{children:(0,g.jsx)(u.g9,{children:(0,g.jsx)(u.F5,{bgColor:"success",width:l[0].utilization,valuemin:0,valuemax:100,children:l[0].utilization+"%"})})}),(0,g.jsx)(u.TK,{children:(0,g.jsx)(u.g9,{children:(0,g.jsx)(u.F5,{bgColor:"info",width:l[1].utilization,valuemin:0,valuemax:100,children:l[1].utilization+"%"})})})]})]})]})})]}),(0,g.jsxs)(u.uZ,{className:"mt-2",children:[(0,g.jsx)(u.TK,{children:(0,g.jsx)(u.g9,{height:"15",children:(0,g.jsx)(u.F5,{bgColor:"primary",width:"100",valuemin:0,valuemax:100,children:"Total/Average"})})}),(0,g.jsx)(u.TK,{children:(0,g.jsx)(u.g9,{height:"15",children:(0,g.jsx)(u.F5,{bgColor:"success",width:"100",valuemin:0,valuemax:100,children:"Registered"})})}),(0,g.jsx)(u.TK,{children:(0,g.jsx)(u.g9,{height:"15",children:(0,g.jsx)(u.F5,{bgColor:"info",width:"100",valuemin:0,valuemax:100,children:"Assistant"})})})]}),(0,g.jsxs)(u.uZ,{children:[(0,g.jsx)(u.TK,{children:(0,g.jsx)(m.FR,{type:"line",data:{labels:h,datasets:[{label:"Average",backgroundColor:"#00f",borderColor:"#00f",pointBackgroundColor:"#00f",pointBorderColor:"#f00",data:H[2]},{label:"Registered",backgroundColor:"#0f0",borderColor:"#0f0",pointBackgroundColor:"#0f0",pointBorderColor:"#f00",data:H[0]},{label:"Assistant",backgroundColor:"#0dcaf0",borderColor:"#0dcaf0",pointBackgroundColor:"#0dcaf0",pointBorderColor:"#f00",data:H[1]}]},options:{maintainAspectRatio:!0,plugins:{legend:{display:!0}},elements:{line:{tension:.5},point:{radius:3,hitRadius:10,hoverRadius:5,hoverBorderWidth:3}}}})}),(0,g.jsx)(u.TK,{children:(0,g.jsx)(m.FR,{type:"line",data:{labels:h,datasets:[{label:"Revenue",backgroundColor:"#00f",borderColor:"#00f",pointBackgroundColor:"#00f",pointBorderColor:"#f00",data:O},{label:"Payroll",backgroundColor:"#0f0",borderColor:"#0f0",pointBackgroundColor:"#0f0",pointBorderColor:"#f00",data:Q},{label:"PNL",backgroundColor:"#0dcaf0",borderColor:"#0dcaf0",pointBackgroundColor:"#0dcaf0",pointBorderColor:"#f00",data:P}]},options:{maintainAspectRatio:!0,plugins:{legend:{display:!0}},elements:{line:{tension:.5},point:{radius:3,hitRadius:10,hoverRadius:5,hoverBorderWidth:3}}}})})]})]})}}]),i}(h.Component);a.default=(0,c.$j)((function(e){return{basic:e.BasicData}}),null)(p)}}]);
//# sourceMappingURL=900.cbb6866e.chunk.js.map